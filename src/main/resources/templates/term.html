<!doctype html>
  <html>
    <head>
      <link rel="stylesheet" href="/npm2mvn/npm.xterm/xterm/5.4.0/css/xterm.css" />
      <link rel="stylesheet" href="/term.css" />
      <script src="/npm2mvn/npm.xterm/xterm/5.4.0/lib/xterm.js"></script>
      <script src="/npm2mvn/npm.xterm/addon-fit/0.9.0/lib/addon-fit.js"></script>
    </head>
    <body id="term">
      <script>
        var term = new Terminal();

        term.open(document.getElementById('term'));
        
        const fitAddon = new FitAddon.FitAddon();
    	term.loadAddon(fitAddon);
        fitAddon.fit();
        
        term.write('Hello from \x1B[1;3;31mNpm2Mvn\x1B[0m $ ');
        
//     	var socket = new WebSocket('wss://' + window.location.hostname
//     		+ ':' + window.location.port + '/socket/term?session=' + $('#term').attr('jad:session'));
//     	socket.binaryType = "arraybuffer";
    		
//     		socket.onmessage = function(event) {
//     		term.write(new Uint8Array(event.data));
//     	};

//         window.addEventListener('resize', function (event) {
//     		fitAddon.fit();
//     		socket.send('size:' + term.cols + ':' + term.rows);
//     	}, true);
    	
//         term.onData((data) => {
//            const buffer = new Uint8Array(data.length + 2);
//             buffer[0] = 'k'.charCodeAt(0) & 255;
//             buffer[1] = ':'.charCodeAt(0) & 255;
//             for (let i = 0; i < data.length; ++i) {
//               buffer[i+2] = data.charCodeAt(i) & 255;
//             }
//             socket.send(buffer);
//         });
      </script>
    </body>
  </html>